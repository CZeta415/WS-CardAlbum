:root{--bg-color:#1a1a1a;--text-color:#e0dcc7;--primary-text:#fff;--border-color:#4a4a4a;--card-shadow:rgba(0,0,0,.9);--seen-glow:rgba(255,255,255,.7);--nerf-text-color:#e53e3e;--theme-accent-color:#dcbaff;--flip-duration:.6s;--font-heading:'Cinzel',serif;--font-body:'EB Garamond',serif}
*,*::before,*::after{box-sizing:border-box}
body{background-color:var(--bg-color);background-image:url(assets/stone-texture.webp);background-attachment:fixed;color:var(--text-color);font-family:var(--font-body);margin:0;padding:20px;text-align:center;overflow-x:hidden;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}
body.no-scroll{overflow:hidden}
.hidden{display:none!important}
:focus-visible{outline:2px solid var(--theme-accent-color);outline-offset:3px}
.main-header{position:fixed;top:15px;right:15px;z-index:1003;display:flex;gap:10px}
.corner-btn{background:rgba(0,0,0,.5);border:1px solid var(--border-color);color:var(--text-color);font-family:var(--font-heading);padding:8px 15px;cursor:pointer;border-radius:4px;transition:all .3s ease}
.corner-btn:hover,.corner-btn:focus-visible{background:#000;color:#fff;box-shadow:0 0 10px var(--seen-glow)}
.main-content{padding-top:60px;padding-left:15px;padding-right:15px;max-width:1200px;margin:0 auto}
.main-content h1,.main-content h2{text-shadow:1px 1px 4px rgba(0,0,0,.95)}
.main-content h1{font-family:var(--font-heading);font-size:clamp(2em,5vw,3em);border-bottom:2px solid var(--border-color);padding-bottom:10px;margin:20px 0;letter-spacing:3px}
.main-content h2{font-weight:400;margin-top:-10px;font-size:clamp(1em,2.5vw,1.2em);transition:color .5s ease-in-out;min-height:1.2em}
#dynamic-subtitle{color:var(--theme-accent-color)}
.controls-container{display:flex;flex-direction:column;align-items:center;gap:5px;margin-bottom:20px}
.card-counter{font-size:1.1em;color:#999;text-shadow:1px 1px 2px #000}
.search-wrapper{position:relative;width:clamp(280px,50%,400px)}
#search-box{background:rgba(0,0,0,.5);border:1px solid var(--border-color);color:var(--text-color);padding:10px 40px 10px 15px;font-family:var(--font-body);width:100%;border-radius:4px;font-size:1em;display:block;transition:all .3s}
#search-box:disabled{background-color:rgba(30,30,30,.7);cursor:not-allowed}
#search-box:focus{border-color:var(--theme-accent-color);background-color:#000}
.clear-search-btn{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:none;color:#999;font-size:1.5em;cursor:pointer;transition:color .2s;padding:0 5px}
.clear-search-btn:hover{color:#fff}
#no-results-message{font-size:1.2em;color:#888;margin-top:50px}
#activation-overlay{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.9);backdrop-filter:blur(8px);z-index:9999;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--text-color);text-align:center;cursor:pointer;transition:opacity .5s ease-out,visibility .5s;visibility:visible;padding:15px}
#activation-overlay.hidden{opacity:0;visibility:hidden;pointer-events:none}
.activation-content h1{font-family:var(--font-heading);font-size:clamp(2em,8vw,3em);color:var(--primary-text);margin-bottom:10px;letter-spacing:4px}
@keyframes float{0%{transform:translateY(0) translateX(0) scale(1)}50%{transform:translateY(-15px) translateX(5px) scale(1.02)}100%{transform:translateY(0) translateX(0) scale(1)}}
#ambient-background{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;background:transparent;overflow:hidden;animation:float 15s ease-in-out infinite}
#ambient-background::before{content:'';position:absolute;width:200vw;height:200vh;top:-50vh;left:-50vw;background-image:radial-gradient(circle,rgba(255,255,255,.08) 1px,transparent 1px);background-size:25px 25px;pointer-events:none}
#initial-deck-container{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;opacity:1;transition:opacity .5s ease,transform .5s ease}
#initial-deck-container.hidden{opacity:0;transform:scale(.8);pointer-events:none}
.card-stack{position:relative;width:150px;height:225px;cursor:pointer;transition:transform .3s ease-out}
.card-stack:hover,.card-stack:focus-visible{transform:scale(1.05)}
.card-stack .card-face{position:absolute;width:100%;height:100%;border-radius:6px;background-size:100% 100%;border:2px solid #000;box-shadow:0 2px 5px #000}
.card-stack :nth-child(1){transform:translate(8px,-4px) rotate(4deg);z-index:1}
.card-stack :nth-child(2){transform:translate(-8px,-2px) rotate(-3deg);z-index:2}
.card-stack :nth-child(3){transform:translate(0,0) rotate(1deg);z-index:3}
.card-gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:30px;padding:20px;width:100%;justify-content:center}
@keyframes card-spawn{from{opacity:0;transform:translateY(30px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}
.card-container{position:relative;perspective:1000px;cursor:pointer;width:150px;height:225px;animation:card-spawn .5s ease-out backwards;margin:0 auto;transition:filter .3s ease-out}
.aura-effect-alfa .card-container.flipped:hover,.aura-effect-alfa .card-container.flipped:focus-visible{filter:drop-shadow(0 0 10px var(--theme-accent-color))}
.aura-effect-beta .card-container.flipped:hover,.aura-effect-beta .card-container.flipped:focus-visible{filter:drop-shadow(0 0 4px var(--theme-accent-color))}
.card-inner{position:relative;z-index:1;width:100%;height:100%;transform-style:preserve-3d;transition:transform var(--flip-duration),box-shadow .4s ease;box-shadow:0 5px 15px rgba(0,0,0,.7);will-change:transform;border-radius:6px}
.card-container:hover .card-inner{transform:translateY(-5px) scale(1.05);box-shadow:0 10px 25px var(--card-shadow)}
.card-container:focus-visible{outline:none}
.card-container:not(.seen) .card-inner{filter:brightness(.7);transition:filter .4s ease}
.card-container:not(.seen):hover .card-inner{filter:brightness(1)}
.card-container.flipped .card-inner{transform:rotateY(180deg)}
.card-container.flipped:hover .card-inner{transform:rotateY(180deg) translateY(-5px) scale(1.05)}
.card-face{position:absolute;top:0;left:0;width:100%;height:100%;backface-visibility:hidden;-webkit-backface-visibility:hidden;border-radius:6px;overflow:hidden;border:2px solid #000}
.card-back{background-size:100% 100%;background-position:center;display:flex;align-items:flex-end;justify-content:center}
.card-back-prompt{width:100%;padding:8px 5px;font-family:var(--font-heading);font-size:1.1em;color:var(--primary-text);text-shadow:1px 1px 2px #000;text-align:center;background:linear-gradient(to top,rgba(0,0,0,.85),transparent);border-bottom-left-radius:4px;border-bottom-right-radius:4px;opacity:1;transition:opacity .3s}
.card-container.seen .card-back-prompt{opacity:0}
@keyframes pulse-glow{0%{filter:drop-shadow(0 0 8px var(--theme-accent-color))}50%{filter:drop-shadow(0 0 18px var(--theme-accent-color))}100%{filter:drop-shadow(0 0 8px var(--theme-accent-color))}}
.card-container.pact-of-the-day{animation:pulse-glow 2.5s infinite ease-in-out}
.card-front{transform:rotateY(180deg);color:var(--primary-text);display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;position:relative;padding:10px;background-color:#111}
.card-front::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-size:100% 100%;background-position:center;background-image:linear-gradient(rgba(0,0,0,.7),rgba(0,0,0,.7)),var(--card-front-image,url(assets/noise.webp));z-index:0;filter:brightness(.8)}
.card-title{position:relative;font-family:var(--font-heading);font-size:1.1em;color:var(--theme-accent-color);margin:0 0 5px;text-shadow:1px 1px 3px rgba(0,0,0,.9)}
.nerf-text{color:var(--nerf-text-color)}
.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);backdrop-filter:blur(5px);z-index:1000;opacity:0;transition:opacity .3s,visibility .3s;visibility:hidden}
.modal{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(.95);background-color:#1c1c1c;background-image:url(assets/stone-texture.webp);padding:30px;border:2px solid #aaa;border-radius:10px;box-shadow:0 0 50px #000;max-width:600px;width:90%;z-index:1001;opacity:0;transition:opacity .3s,transform .3s,visibility .3s;visibility:hidden;max-height:85vh;overflow-y:auto;text-align:left}
.modal.large-modal{max-width:800px;}
.modal-overlay.visible{opacity:1;visibility:visible}
.modal.visible{opacity:1;transform:translate(-50%,-50%) scale(1);visibility:visible}
.modal h2{font-family:var(--font-heading);text-shadow:1px 1px 2px rgba(0,0,0,.9);text-align:center;margin-top:0;margin-bottom:8px;letter-spacing:1px}
.modal .modal-subtitle{text-align:center;margin-top:0;margin-bottom:25px;color:#aaa}
.modal ul{list-style:none;padding:0;margin-top:15px}
.modal li{margin-bottom:1em;line-height:1.5}
.modal p{line-height:1.6}
.modal small{display:block;margin-top:20px;font-style:italic;color:#999}
.close-modal-btn{position:absolute;top:10px;right:10px;z-index:10;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-family:sans-serif;font-size:1.5em;color:#999;transition:color .2s,transform .2s;background:rgba(0,0,0,.5);border:1px solid transparent; border-radius:50%}
.close-modal-btn:hover{color:#fff;transform:scale(1.1)}
#comment-categories-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px}
.category-btn{background-color:rgba(255,255,255,.05);border:1px solid var(--border-color);padding:15px;border-radius:8px;text-align:left;cursor:pointer;transition:all .3s ease;color:var(--text-color)}
.category-btn:hover,.category-btn:focus-visible{background-color:rgba(255,255,255,.1);border-color:var(--theme-accent-color);transform:translateY(-3px)}
.category-btn .icon{font-size:1.5em;margin-right:12px}
.category-btn .info{display:inline-block;vertical-align:middle}
.category-btn .name{font-family:var(--font-heading);font-size:1.2em;display:block;color:var(--primary-text)}
.category-btn .description{font-size:.9em;color:#aaa;display:block}
#giscus-container{min-height:400px;margin-top:20px}
.card-view-modal{max-width:900px;padding:0;display:flex;align-items:center}
.card-view-content{display:flex;align-items:center;gap:25px;padding:30px 80px;width:100%}
.card-view-image-container{flex-shrink:0;width:250px;height:375px;display:flex;align-items:center;justify-content:center}
#card-view-image{width:100%;height:100%;object-fit:contain;display:block;background-color:transparent;filter:drop-shadow(0 0 8px rgba(0,0,0,.8))}
.card-view-details{text-align:left}
#card-view-title{color:var(--theme-accent-color);margin-top:0;font-size:clamp(1.8em,4vw,2.2em);text-shadow:1px 1px 5px #000;font-family:var(--font-heading)}
#card-view-description{font-size:clamp(1em,2vw,1.1em);line-height:1.6;text-shadow:1px 1px 3px #000}
.card-nav-btn{position:absolute;top:0;background:rgba(0,0,0,.4);color:var(--text-color);border:none;font-size:2.5em;cursor:pointer;height:100%;width:60px;transition:background .2s;z-index:2;user-select:none;-webkit-user-select:none}
.card-nav-btn:hover{background:rgba(0,0,0,.7)}
#prev-card-btn{left:0;border-top-left-radius:8px;border-bottom-left-radius:8px}
#next-card-btn{right:0;border-top-right-radius:8px;border-bottom-right-radius:8px}
.settings-panel,.modal{scrollbar-width:thin; scrollbar-color: #555 #333;}
.settings-panel::-webkit-scrollbar,.modal::-webkit-scrollbar{width:8px}
.settings-panel::-webkit-scrollbar-track,.modal::-webkit-scrollbar-track{background:#333}
.settings-panel::-webkit-scrollbar-thumb,.modal::-webkit-scrollbar-thumb{background-color:#555;border-radius:4px}
.settings-panel{position:absolute;top:50px;right:0;background:rgba(20,20,20,.95);border:1px solid var(--border-color);border-radius:8px;padding:15px;z-index:1002;text-align:left;backdrop-filter:blur(5px);width:280px;max-height:calc(90vh - 60px);overflow-y:auto;visibility:hidden;opacity:0;transform:translateY(-10px);transition:all .3s ease}
.settings-panel.visible{visibility:visible;opacity:1;transform:translateY(0)}
.settings-panel h4{margin:0 0 15px 0;font-family:var(--font-heading);text-align:center}
.setting-option{margin-bottom:15px}
.setting-option label{display:block;margin-bottom:8px;font-size:.9em;color:#ccc}
.setting-toggle{display:flex;gap:15px}
.color-selector,.card-back-selector{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.color-swatch{width:25px;height:25px;border-radius:50%;cursor:pointer;border:2px solid transparent;transition:border-color .2s}
.color-swatch.selected,.color-swatch:hover,.color-swatch:focus-visible{border-color:#fff}
.card-back-option{width:45px;height:67.5px;object-fit:cover;border-radius:4px;cursor:pointer;border:2px solid transparent;transition:border-color .2s;box-sizing:border-box;flex-shrink:0}
.card-back-option.selected,.card-back-option:hover,.card-back-option:focus-visible{border-color:#fff}
.card-back-option.default-back{display:flex;align-items:center;justify-content:center;font-family:var(--font-heading);font-size:1.5em;background:linear-gradient(45deg,#2a2a2a,#3a3a3a);color:#ccc}
.settings-divider{border:none;border-top:1px solid var(--border-color);margin:20px 0}
#master-volume-slider{width:100%;cursor:pointer}
.sound-mute-toggles{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;font-size:.9em}
.sound-mute-toggles label{display:flex;align-items:center;gap:5px;cursor:pointer}
.data-actions{display:flex;justify-content:space-between;gap:10px;margin-bottom:10px}
.settings-btn{flex-grow:1;padding:8px;font-family:var(--font-body);font-size:.9em;border-radius:4px;border:1px solid var(--border-color);cursor:pointer;transition:all .2s ease;background-color:#333;color:#ccc}
.settings-btn:hover{background-color:#444;color:#fff}
.caution-btn{background-color:#6d4b00;color:#ffdda8}
.caution-btn:hover,.caution-btn:focus-visible{background-color:#936500;color:#fff}
.danger-btn{background-color:darkred;color:#ffc2c2}
.danger-btn:hover,.danger-btn:focus-visible{background-color:#b50000;color:#fff}
.discord-community{display:flex;align-items:center;justify-content:center;gap:15px;margin:30px auto;padding:10px 20px;border:1px solid var(--border-color);border-radius:8px;max-width:400px;background:rgba(0,0,0,.3);text-decoration:none;color:var(--text-color);transition:all .3s ease}
.discord-community:hover,.discord-community:focus-visible{background:#000;color:#fff;box-shadow:0 0 10px var(--seen-glow);border-color:#fff}
.discord-community h3{margin:0;font-family:var(--font-body);font-size:1.2em;color:var(--theme-accent-color);text-shadow:1px 1px 2px rgba(0,0,0,.9)}
.discord-community img{width:40px;height:40px;transition:transform .3s ease;border-radius:50%}
.discord-community:hover img,.discord-community:focus-visible img{transform:scale(1.1)}
.visitor-counter{position:fixed;bottom:15px;left:15px;background-color:rgba(0,0,0,.6);border:1px solid var(--border-color);border-radius:8px;padding:5px 12px;z-index:1000;display:flex;align-items:center;backdrop-filter:blur(4px);font-size:.9em;transition:opacity .3s}
.visitor-counter.hidden span{display:none}
#visitor-counter-toggle{background:none;border:none;cursor:pointer;padding:5px;margin-right:8px;font-size:1.2em}
@media (max-width:768px){.main-content{padding-top:30px}.card-view-content{flex-direction:column;padding:50px 20px 20px;text-align:center}.card-view-details{text-align:center}#card-view-image{max-width:200px;height:auto}.modal{max-height:90vh}}
/* Correcci√≥n del panel de ajustes */
#settings-panel {
  position: fixed !important;
  top: 70px !important;
  right: 20px !important;
  z-index: 2000 !important;
}
